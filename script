import { useState } from "react";
import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";

const questions = [
  {
    question: "–¢—ã –æ—á–Ω—É–ª—Å—è –≤ —Å–∏–º—É–ª—è—Ü–∏–∏. –ß—Ç–æ –ø–µ—Ä–≤–æ–µ –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç —Ç–≤–æ—ë –≤–Ω–∏–º–∞–Ω–∏–µ?",
    options: [
      { text: "–û—Ç–º–µ–ª—å –∏ –µ—ë –±–µ–∑–º–æ–ª–≤–∏–µ", value: "–¥–∂–∏—Å–æ–Ω" },
      { text: "–°–∏–≥–Ω–∞–ª—ã –≤ —ç—Ñ–∏—Ä–µ", value: "—Ä–µ–Ω–¥–∂—É–Ω" },
      { text: "–ß–µ–π-—Ç–æ –≥–æ–ª–æ—Å –≤ –≥–æ–ª–æ–≤–µ", value: "–¥–∂–µ–º–∏–Ω" },
      { text: "–°–ª–µ–¥—ã –∫—Ä–æ–≤–∏ –Ω–∞ –ø–µ—Å–∫–µ", value: "–¥–∂–µ–Ω–æ" },
    ],
  },
  {
    question: "–í –Ω–µ–∑–Ω–∞–∫–æ–º–æ–º –ª–∞–≥–µ—Ä–µ —Ç–µ–±–µ –Ω–µ –¥–æ–≤–µ—Ä—è—é—Ç. –¢–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è?",
    options: [
      { text: "–£—Ö–æ–∂—É –±–µ–∑ —à—É–º–∞", value: "–¥–∂–∏—Å–æ–Ω" },
      { text: "–í—Ç–∏—Ä–∞—é—Å—å –≤ –¥–æ–≤–µ—Ä–∏–µ", value: "—Ö—ç—á–∞–Ω" },
      { text: "–ì–æ—Ç–æ–≤–ª—é—Å—å –∫ –¥—Ä–∞–∫–µ", value: "–¥–∂–µ–Ω–æ" },
      { text: "–ë–ª–µ—Ñ—É—é –∏ —É–ª—ã–±–∞—é—Å—å", value: "—á–µ–Ω–ª—ç" },
    ],
  },
  {
    question: "–ß—Ç–æ –¥–ª—è —Ç–µ–±—è –≤–∞–∂–Ω–µ–µ –≤—Å–µ–≥–æ?",
    options: [
      { text: "–ù–∞–π—Ç–∏ —Ç–æ–≥–æ, –∫–æ–≥–æ –ø–æ—Ç–µ—Ä—è–ª", value: "–¥–∂–∏—Å–æ–Ω" },
      { text: "–†–∞–∑–≥–∞–¥–∞—Ç—å, —á—Ç–æ –∑–∞ —ç—Ç–∏–º –≤—Å–µ–º —Å—Ç–æ–∏—Ç", value: "–¥–∂–µ–º–∏–Ω" },
      { text: "–í—ã–∂–∏—Ç—å –ª—é–±–æ–π —Ü–µ–Ω–æ–π", value: "—Ö—ç—á–∞–Ω" },
      { text: "–ù–∞–π—Ç–∏ –Ω–æ–≤—ã—Ö —Å–æ—é–∑–Ω–∏–∫–æ–≤", value: "—á–µ–Ω–ª—ç" },
    ],
  },
  {
    question: "–¢—ã –æ–∫–∞–∑–∞–ª—Å—è –ø–µ—Ä–µ–¥ –º–∞—è–∫–æ–º. –ß—Ç–æ —Ç—ã —Å–¥–µ–ª–∞–µ—à—å?",
    options: [
      { text: "–í–æ–π–¥—É ‚Äî –∏ –±—É–¥—å —á—Ç–æ –±—É–¥–µ—Ç", value: "–¥–∂–µ–Ω–æ" },
      { text: "–ü–æ—Å—Ç–∞—Ä–∞—é—Å—å –ø–æ–Ω—è—Ç—å —Å–∏–≥–Ω–∞–ª—ã", value: "—Ä–µ–Ω–¥–∂—É–Ω" },
      { text: "–£–π–¥—É ‚Äî –Ω–µ –≤—Ä–µ–º—è", value: "–¥–∂–∏—Å–æ–Ω" },
      { text: "–û—Å—Ç–∞–Ω—É—Å—å –∂–¥–∞—Ç—å –∫–æ–≥–æ-—Ç–æ", value: "–¥–∂–µ–º–∏–Ω" },
    ],
  },
];

const results = {
  –¥–∂–∏—Å–æ–Ω: "–¢—ã ‚Äî –ü–∞–∫ –î–∂–∏—Å–æ–Ω (F5/S28). –ú–æ–ª—á–∞–ª–∏–≤—ã–π –∏ –ø—Ä–æ–Ω–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π. –¢—ã –∏—â–µ—à—å –æ—Ç–≤–µ—Ç—ã –≤ –∫–∞–∂–¥–æ–º –≤–∑–≥–ª—è–¥–µ, –∫–∞–∂–¥–æ–π –¥–µ—Ç–∞–ª–∏. –ò —Ç—ã –∏—Ö –Ω–∞–π–¥–µ—à—å. –ù–æ –ø–æ –∫–∞–∫–æ–π —Ü–µ–Ω–µ?",
  –¥–∂–µ–º–∏–Ω: "–¢—ã ‚Äî –ù–∞ –î–∂–µ–º–∏–Ω (AU13). –Ø—Ä–∫–∏–π, –≤—Å–ø—ã–ª—å—á–∏–≤—ã–π, —Ö–∞—Ä–∏–∑–º–∞—Ç–∏—á–Ω—ã–π. –ó–∞ —Ç–≤–æ–µ–π –¥–µ—Ä–∑–æ—Å—Ç—å—é ‚Äî –º–Ω–æ–≥–æ –±–æ–ª–∏. –ù–æ —Ç—ã —Ç–æ—Ç, –∫—Ç–æ –≤–µ–¥—ë—Ç –∑–∞ —Å–æ–±–æ–π.",
  –¥–∂–µ–Ω–æ: "–¢—ã ‚Äî –õ–∏ –î–∂–µ–Ω–æ (AP23). –°–ø–æ–∫–æ–π–Ω—ã–π, –Ω–æ —Å–º–µ—Ä—Ç–æ–Ω–æ—Å–Ω—ã–π. –ú–µ–Ω—å—à–µ —Å–ª–æ–≤ ‚Äî –±–æ–ª—å—à–µ –¥–µ–ª–∞. –õ—é–¥–∏ –±–æ—è—Ç—Å—è —Ç–µ–±—è, –Ω–æ —Ç—ã –¥–µ—Ä–∂–∏—à—å –∏—Ö –∂–∏–≤—ã–º–∏.",
  —Ö—ç—á–∞–Ω: "–¢—ã ‚Äî –õ–∏ –•—ç—á–∞–Ω (JN6). –ë—ã–≤—à–∏–π –∏–Ω—Ñ–æ—Ü—ã–≥–∞–Ω, —Ç–µ–ø–µ—Ä—å –æ—Ä—É–∂–µ–π–Ω–∏–∫. –®—É—Ç–∏—à—å ‚Äî –∏ –±—å–µ—à—å –ø–µ—Ä–≤—ã–º. –¢–µ–±—è –Ω–µ–¥–æ–æ—Ü–µ–Ω–∏–≤–∞—é—Ç, –∏ –∑—Ä—è.",
  —á–µ–Ω–ª—ç: "–¢—ã ‚Äî –ß–∂–æ–Ω –ß–µ–Ω–ª—ç (N22). –ú–∞–Ω–∏–ø—É–ª—è—Ç–æ—Ä –∏ –∞—Ä—Ç–∏—Å—Ç. –ù–∏–∫—Ç–æ –Ω–µ –∑–Ω–∞–µ—Ç, –≥–¥–µ –∫–æ–Ω—á–∞–µ—Ç—Å—è —Ç–≤–æ—è –∏–≥—Ä–∞. –ù–æ —Ç–µ–±–µ –∏ –Ω–µ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –∑–Ω–∞–ª–∏.",
  —Ä–µ–Ω–¥–∂—É–Ω: "–¢—ã ‚Äî –•—É–∞–Ω –†–µ–Ω–¥–∂—É–Ω (MR23). –ó–∞—Ç–µ—Ä—è–Ω–Ω—ã–π, –∫–∞–∫ –∏ —Å–∞–º —Å–º—ã—Å–ª —Å–∏–º—É–ª—è—Ü–∏–∏. –ù–æ –∏–º–µ–Ω–Ω–æ —Ç—ã —Ö—Ä–∞–Ω–∏—à—å —Å–∞–º—É—é –≤–∞–∂–Ω—É—é —Ç–∞–π–Ω—É.",
};

export default function OtmelQuiz() {
  const [step, setStep] = useState(0);
  const [answers, setAnswers] = useState([]);
  const [result, setResult] = useState(null);

  const handleAnswer = (value) => {
    const newAnswers = [...answers, value];
    setAnswers(newAnswers);

    if (step + 1 < questions.length) {
      setStep(step + 1);
    } else {
      const count = {};
      newAnswers.forEach((v) => (count[v] = (count[v] || 0) + 1));
      const final = Object.entries(count).sort((a, b) => b[1] - a[1])[0][0];
      setResult(results[final]);
    }
  };

  return (
    <div className="p-4 max-w-xl mx-auto text-green-300 font-mono">
      {!result ? (
        <Card className="bg-black/70 border border-green-500">
          <CardContent className="space-y-4 p-6">
            <h2 className="text-xl">{questions[step].question}</h2>
            <div className="space-y-2">
              {questions[step].options.map((opt, idx) => (
                <Button
                  key={idx}
                  onClick={() => handleAnswer(opt.value)}
                  variant="outline"
                  className="w-full border-green-500 text-green-300 hover:bg-green-800"
                >
                  {opt.text}
                </Button>
              ))}
            </div>
          </CardContent>
        </Card>
      ) : (
        <Card className="bg-black/80 border border-green-500">
          <CardContent className="p-6">
            <h2 className="text-xl mb-4">üìÅ –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω:</h2>
            <p>{result}</p>
          </CardContent>
        </Card>
      )}
    </div>
  );
}
